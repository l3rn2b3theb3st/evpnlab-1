annotations:
  - border_color: '#00000000'
    border_style: ''
    color: '#241D92'
    rotation: 0
    text_bold: false
    text_content: |-
      UNDERLAY
      + spine-1 & leaves link: 10.1.x.0/30
      + spine-2 & leaves link: 10.2.x.0/30
      + loopback 0 spine-1/2: 10.0.0.1-2/32
      + loopback 0 leaf-1/2/3: 10.0.0.11-12-13/32
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 240.0
    y1: -280.0
    z_index: 0
  - border_color: '#00000000'
    border_style: ''
    color: '#B80FAD'
    rotation: 0
    text_bold: false
    text_content: |-
      OVERLAY
      + loopback 1 spine-1/2: 10.0.0.101-102/32
      + loopback 1 spine-VIP: 10.0.0.100/32
      + pim group-address: 239.0.0.0/8
      + iBGP ASN: 65100
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 240.0
    y1: -120.0
    z_index: 0
  - border_color: '#00000000'
    border_style: ''
    color: '#7FA534'
    rotation: 0
    text_bold: false
    text_content: "node\tRouter-id\nS1\t11.11.11.11\nS2\t12.12.12.12\nL1\t1.1.1.1\n\
      L2\t2.2.2.2\nL3\t3.3.3.3"
    text_font: monospace
    text_italic: true
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 640.0
    y1: -280.0
    z_index: 1
  - border_color: '#00000000'
    border_style: ''
    color: '#1A1B1D'
    rotation: 0
    text_bold: false
    text_content: |
      vlan vxlan-id subnet
      10 10010  192.168.10.0/24
      20 10020  192.168.20.0/24
      30 10030  192.168.30.0/24
    text_font: monospace
    text_italic: true
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 640.0
    y1: -120.0
    z_index: 1
nodes:
  - boot_disk_size: null
    configuration:
      - name: default
        content: System Bridge
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: true
    id: n0
    image_definition: null
    label: ext-int
    node_definition: external_connector
    parameters: {}
    ram: null
    tags: []
    x: 480
    y: 80
    interfaces:
      - id: i0
        label: port
        slot: 0
        type: physical
  - boot_disk_size: null
    configuration: []
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: true
    id: n1
    image_definition: null
    label: mgmt
    node_definition: unmanaged_switch
    parameters: {}
    ram: null
    tags: []
    x: 360
    y: 80
    interfaces:
      - id: i0
        label: port0
        slot: 0
        type: physical
      - id: i1
        label: port1
        slot: 1
        type: physical
      - id: i2
        label: port2
        slot: 2
        type: physical
      - id: i3
        label: port3
        slot: 3
        type: physical
      - id: i4
        label: port4
        slot: 4
        type: physical
      - id: i5
        label: port5
        slot: 5
        type: physical
      - id: i6
        label: port6
        slot: 6
        type: physical
      - id: i7
        label: port7
        slot: 7
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |-
          hostname CML-N9k
          # workaround for booting to loader> prompt
          echo 'from cli import cli' > set_boot.py
          echo 'import json' >> set_boot.py
          echo 'import os' >> set_boot.py
          echo 'import time' >> set_boot.py
          echo 'bootimage = json.loads(cli("show version | json"))["nxos_file_name"]' >> set_boot.py
          echo 'set_boot = cli("conf t ; boot nxos {} ; no event manager applet BOOTCONFIG".format(bootimage))' >> set_boot.py
          echo 'i = 0' >> set_boot.py
          echo 'while i < 10:' >> set_boot.py
          echo '    try:' >> set_boot.py
          echo '        save_config = cli("copy running-config startup-config")' >> set_boot.py
          echo '        break' >> set_boot.py
          echo '    except Exception:' >> set_boot.py
          echo '        i += 1' >> set_boot.py
          echo '        time.sleep(1)' >> set_boot.py
          echo 'os.remove("/bootflash/set_boot.py")' >> set_boot.py
          event manager applet BOOTCONFIG
           event syslog pattern "Configured from vty"
           action 1.0 cli python bootflash:set_boot.py
          # minimum needed config to login
          no password strength-check
          username admin role network-admin
          username admin password C1sco1234 role network-admin
          !
          !
          !
          int mgmt0
          ip address dhcp
          no cdp enable
          exit
          !
          vrf context management
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n2
    image_definition: null
    label: Spine-1
    node_definition: nxosv9000
    parameters: {}
    ram: null
    tags: []
    x: -160
    y: -240
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/4
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/5
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/6
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/7
        slot: 7
        type: physical
      - id: i9
        label: Ethernet1/8
        slot: 8
        type: physical
      - id: i10
        label: Ethernet1/9
        slot: 9
        type: physical
      - id: i11
        label: Ethernet1/10
        slot: 10
        type: physical
      - id: i12
        label: Ethernet1/11
        slot: 11
        type: physical
      - id: i13
        label: Ethernet1/12
        slot: 12
        type: physical
      - id: i14
        label: Ethernet1/13
        slot: 13
        type: physical
      - id: i15
        label: Ethernet1/14
        slot: 14
        type: physical
      - id: i16
        label: Ethernet1/15
        slot: 15
        type: physical
      - id: i17
        label: Ethernet1/16
        slot: 16
        type: physical
      - id: i18
        label: Ethernet1/17
        slot: 17
        type: physical
      - id: i19
        label: Ethernet1/18
        slot: 18
        type: physical
      - id: i20
        label: Ethernet1/19
        slot: 19
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |-
          hostname CML-N9k
          # workaround for booting to loader> prompt
          echo 'from cli import cli' > set_boot.py
          echo 'import json' >> set_boot.py
          echo 'import os' >> set_boot.py
          echo 'import time' >> set_boot.py
          echo 'bootimage = json.loads(cli("show version | json"))["nxos_file_name"]' >> set_boot.py
          echo 'set_boot = cli("conf t ; boot nxos {} ; no event manager applet BOOTCONFIG".format(bootimage))' >> set_boot.py
          echo 'i = 0' >> set_boot.py
          echo 'while i < 10:' >> set_boot.py
          echo '    try:' >> set_boot.py
          echo '        save_config = cli("copy running-config startup-config")' >> set_boot.py
          echo '        break' >> set_boot.py
          echo '    except Exception:' >> set_boot.py
          echo '        i += 1' >> set_boot.py
          echo '        time.sleep(1)' >> set_boot.py
          echo 'os.remove("/bootflash/set_boot.py")' >> set_boot.py
          event manager applet BOOTCONFIG
           event syslog pattern "Configured from vty"
           action 1.0 cli python bootflash:set_boot.py
          # minimum needed config to login
          no password strength-check
          username admin role network-admin
          username admin password C1sco1234 role network-admin
          !
          !
          !
          int mgmt0
          ip address dhcp
          no cdp enable
          exit
          !
          vrf context management
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n3
    image_definition: null
    label: Spine-2
    node_definition: nxosv9000
    parameters: {}
    ram: null
    tags: []
    x: 40
    y: -240
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/4
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/5
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/6
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/7
        slot: 7
        type: physical
      - id: i9
        label: Ethernet1/8
        slot: 8
        type: physical
      - id: i10
        label: Ethernet1/9
        slot: 9
        type: physical
      - id: i11
        label: Ethernet1/10
        slot: 10
        type: physical
      - id: i12
        label: Ethernet1/11
        slot: 11
        type: physical
      - id: i13
        label: Ethernet1/12
        slot: 12
        type: physical
      - id: i14
        label: Ethernet1/13
        slot: 13
        type: physical
      - id: i15
        label: Ethernet1/14
        slot: 14
        type: physical
      - id: i16
        label: Ethernet1/15
        slot: 15
        type: physical
      - id: i17
        label: Ethernet1/16
        slot: 16
        type: physical
      - id: i18
        label: Ethernet1/17
        slot: 17
        type: physical
      - id: i19
        label: Ethernet1/18
        slot: 18
        type: physical
      - id: i20
        label: Ethernet1/19
        slot: 19
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |-
          hostname CML-N9k
          # workaround for booting to loader> prompt
          echo 'from cli import cli' > set_boot.py
          echo 'import json' >> set_boot.py
          echo 'import os' >> set_boot.py
          echo 'import time' >> set_boot.py
          echo 'bootimage = json.loads(cli("show version | json"))["nxos_file_name"]' >> set_boot.py
          echo 'set_boot = cli("conf t ; boot nxos {} ; no event manager applet BOOTCONFIG".format(bootimage))' >> set_boot.py
          echo 'i = 0' >> set_boot.py
          echo 'while i < 10:' >> set_boot.py
          echo '    try:' >> set_boot.py
          echo '        save_config = cli("copy running-config startup-config")' >> set_boot.py
          echo '        break' >> set_boot.py
          echo '    except Exception:' >> set_boot.py
          echo '        i += 1' >> set_boot.py
          echo '        time.sleep(1)' >> set_boot.py
          echo 'os.remove("/bootflash/set_boot.py")' >> set_boot.py
          event manager applet BOOTCONFIG
           event syslog pattern "Configured from vty"
           action 1.0 cli python bootflash:set_boot.py
          # minimum needed config to login
          no password strength-check
          username admin role network-admin
          username admin password C1sco1234 role network-admin
          !
          !
          !
          int mgmt0
          ip address dhcp
          no cdp enable
          exit
          !
          vrf context management
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n4
    image_definition: null
    label: Leaf-1
    node_definition: nxosv9000
    parameters: {}
    ram: null
    tags: []
    x: -280
    y: -40
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/4
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/5
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/6
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/7
        slot: 7
        type: physical
      - id: i9
        label: Ethernet1/8
        slot: 8
        type: physical
      - id: i10
        label: Ethernet1/9
        slot: 9
        type: physical
      - id: i11
        label: Ethernet1/10
        slot: 10
        type: physical
      - id: i12
        label: Ethernet1/11
        slot: 11
        type: physical
      - id: i13
        label: Ethernet1/12
        slot: 12
        type: physical
      - id: i14
        label: Ethernet1/13
        slot: 13
        type: physical
      - id: i15
        label: Ethernet1/14
        slot: 14
        type: physical
      - id: i16
        label: Ethernet1/15
        slot: 15
        type: physical
      - id: i17
        label: Ethernet1/16
        slot: 16
        type: physical
      - id: i18
        label: Ethernet1/17
        slot: 17
        type: physical
      - id: i19
        label: Ethernet1/18
        slot: 18
        type: physical
      - id: i20
        label: Ethernet1/19
        slot: 19
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |-
          hostname CML-N9k
          # workaround for booting to loader> prompt
          echo 'from cli import cli' > set_boot.py
          echo 'import json' >> set_boot.py
          echo 'import os' >> set_boot.py
          echo 'import time' >> set_boot.py
          echo 'bootimage = json.loads(cli("show version | json"))["nxos_file_name"]' >> set_boot.py
          echo 'set_boot = cli("conf t ; boot nxos {} ; no event manager applet BOOTCONFIG".format(bootimage))' >> set_boot.py
          echo 'i = 0' >> set_boot.py
          echo 'while i < 10:' >> set_boot.py
          echo '    try:' >> set_boot.py
          echo '        save_config = cli("copy running-config startup-config")' >> set_boot.py
          echo '        break' >> set_boot.py
          echo '    except Exception:' >> set_boot.py
          echo '        i += 1' >> set_boot.py
          echo '        time.sleep(1)' >> set_boot.py
          echo 'os.remove("/bootflash/set_boot.py")' >> set_boot.py
          event manager applet BOOTCONFIG
           event syslog pattern "Configured from vty"
           action 1.0 cli python bootflash:set_boot.py
          # minimum needed config to login
          no password strength-check
          username admin role network-admin
          username admin password C1sco1234 role network-admin
          !
          !
          !
          int mgmt0
          ip address dhcp
          no cdp enable
          exit
          !
          vrf context management
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n5
    image_definition: null
    label: Leaf-2
    node_definition: nxosv9000
    parameters: {}
    ram: null
    tags: []
    x: -40
    y: -40
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/4
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/5
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/6
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/7
        slot: 7
        type: physical
      - id: i9
        label: Ethernet1/8
        slot: 8
        type: physical
      - id: i10
        label: Ethernet1/9
        slot: 9
        type: physical
      - id: i11
        label: Ethernet1/10
        slot: 10
        type: physical
      - id: i12
        label: Ethernet1/11
        slot: 11
        type: physical
      - id: i13
        label: Ethernet1/12
        slot: 12
        type: physical
      - id: i14
        label: Ethernet1/13
        slot: 13
        type: physical
      - id: i15
        label: Ethernet1/14
        slot: 14
        type: physical
      - id: i16
        label: Ethernet1/15
        slot: 15
        type: physical
      - id: i17
        label: Ethernet1/16
        slot: 16
        type: physical
      - id: i18
        label: Ethernet1/17
        slot: 17
        type: physical
      - id: i19
        label: Ethernet1/18
        slot: 18
        type: physical
      - id: i20
        label: Ethernet1/19
        slot: 19
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |-
          hostname CML-N9k
          # workaround for booting to loader> prompt
          echo 'from cli import cli' > set_boot.py
          echo 'import json' >> set_boot.py
          echo 'import os' >> set_boot.py
          echo 'import time' >> set_boot.py
          echo 'bootimage = json.loads(cli("show version | json"))["nxos_file_name"]' >> set_boot.py
          echo 'set_boot = cli("conf t ; boot nxos {} ; no event manager applet BOOTCONFIG".format(bootimage))' >> set_boot.py
          echo 'i = 0' >> set_boot.py
          echo 'while i < 10:' >> set_boot.py
          echo '    try:' >> set_boot.py
          echo '        save_config = cli("copy running-config startup-config")' >> set_boot.py
          echo '        break' >> set_boot.py
          echo '    except Exception:' >> set_boot.py
          echo '        i += 1' >> set_boot.py
          echo '        time.sleep(1)' >> set_boot.py
          echo 'os.remove("/bootflash/set_boot.py")' >> set_boot.py
          event manager applet BOOTCONFIG
           event syslog pattern "Configured from vty"
           action 1.0 cli python bootflash:set_boot.py
          # minimum needed config to login
          no password strength-check
          username admin role network-admin
          username admin password C1sco1234 role network-admin
          !
          !
          !
          int mgmt0
          ip address dhcp
          no cdp enable
          exit
          !
          vrf context management
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n6
    image_definition: null
    label: Leaf-3
    node_definition: nxosv9000
    parameters: {}
    ram: null
    tags: []
    x: 160
    y: -40
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/4
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/5
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/6
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/7
        slot: 7
        type: physical
      - id: i9
        label: Ethernet1/8
        slot: 8
        type: physical
      - id: i10
        label: Ethernet1/9
        slot: 9
        type: physical
      - id: i11
        label: Ethernet1/10
        slot: 10
        type: physical
      - id: i12
        label: Ethernet1/11
        slot: 11
        type: physical
      - id: i13
        label: Ethernet1/12
        slot: 12
        type: physical
      - id: i14
        label: Ethernet1/13
        slot: 13
        type: physical
      - id: i15
        label: Ethernet1/14
        slot: 14
        type: physical
      - id: i16
        label: Ethernet1/15
        slot: 15
        type: physical
      - id: i17
        label: Ethernet1/16
        slot: 16
        type: physical
      - id: i18
        label: Ethernet1/17
        slot: 17
        type: physical
      - id: i19
        label: Ethernet1/18
        slot: 18
        type: physical
      - id: i20
        label: Ethernet1/19
        slot: 19
        type: physical
  - boot_disk_size: null
    configuration: []
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n7
    image_definition: null
    label: SrvAcc-10.31
    node_definition: ubuntu
    parameters: {}
    ram: null
    tags: []
    x: 120
    y: 120
    interfaces:
      - id: i0
        label: ens2
        slot: 0
        type: physical
      - id: i1
        label: ens3
        slot: 1
        type: physical
  - boot_disk_size: null
    configuration: []
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n8
    image_definition: null
    label: SrvAcc-20.31
    node_definition: ubuntu
    parameters: {}
    ram: null
    tags: []
    x: 240
    y: 120
    interfaces:
      - id: i0
        label: ens2
        slot: 0
        type: physical
      - id: i1
        label: ens3
        slot: 1
        type: physical
  - boot_disk_size: null
    configuration: []
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n9
    image_definition: null
    label: SrvAcc-10.11
    node_definition: ubuntu
    parameters: {}
    ram: null
    tags: []
    x: -280
    y: 120
    interfaces:
      - id: i0
        label: ens2
        slot: 0
        type: physical
      - id: i1
        label: ens3
        slot: 1
        type: physical
  - boot_disk_size: null
    configuration: []
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n10
    image_definition: null
    label: SrvTrk-10.21-20.21
    node_definition: ubuntu
    parameters: {}
    ram: null
    tags: []
    x: -40
    y: 120
    interfaces:
      - id: i0
        label: ens2
        slot: 0
        type: physical
      - id: i1
        label: ens3
        slot: 1
        type: physical
links:
  - id: l0
    n1: n0
    n2: n1
    i1: i0
    i2: i0
    conditioning: {}
    label: ext-int-port<->mgmt-port0
  - id: l1
    n1: n1
    n2: n2
    i1: i1
    i2: i1
    conditioning: {}
    label: mgmt-port1<->Spine-1-mgmt0
  - id: l2
    n1: n1
    n2: n3
    i1: i2
    i2: i1
    conditioning: {}
    label: mgmt-port2<->Spine-2-mgmt0
  - id: l3
    n1: n1
    n2: n4
    i1: i3
    i2: i1
    conditioning: {}
    label: mgmt-port3<->Leaf-1-mgmt0
  - id: l4
    n1: n1
    n2: n5
    i1: i4
    i2: i1
    conditioning: {}
    label: mgmt-port4<->Leaf-2-mgmt0
  - id: l5
    n1: n1
    n2: n6
    i1: i5
    i2: i1
    conditioning: {}
    label: mgmt-port5<->Leaf-3-mgmt0
  - id: l6
    n1: n2
    n2: n4
    i1: i2
    i2: i2
    conditioning: {}
    label: Spine-1-Ethernet1/1<->Leaf-1-Ethernet1/1
  - id: l7
    n1: n2
    n2: n5
    i1: i3
    i2: i2
    conditioning: {}
    label: Spine-1-Ethernet1/2<->Leaf-2-Ethernet1/1
  - id: l8
    n1: n2
    n2: n6
    i1: i4
    i2: i2
    conditioning: {}
    label: Spine-1-Ethernet1/3<->Leaf-3-Ethernet1/1
  - id: l9
    n1: n3
    n2: n4
    i1: i2
    i2: i3
    conditioning: {}
    label: Spine-2-Ethernet1/1<->Leaf-1-Ethernet1/2
  - id: l10
    n1: n3
    n2: n5
    i1: i3
    i2: i3
    conditioning: {}
    label: Spine-2-Ethernet1/2<->Leaf-2-Ethernet1/2
  - id: l11
    n1: n3
    n2: n6
    i1: i4
    i2: i3
    conditioning: {}
    label: Spine-2-Ethernet1/3<->Leaf-3-Ethernet1/2
  - id: l12
    n1: n8
    n2: n6
    i1: i0
    i2: i5
    conditioning: {}
    label: ubuntu-1-ens2<->Leaf-3-Ethernet1/4
  - id: l13
    n1: n7
    n2: n6
    i1: i0
    i2: i4
    conditioning: {}
    label: ubuntu-0-ens2<->Leaf-3-Ethernet1/3
  - id: l14
    n1: n9
    n2: n4
    i1: i0
    i2: i4
    conditioning: {}
    label: ubuntu-2-ens2<->Leaf-1-Ethernet1/3
  - id: l15
    n1: n10
    n2: n5
    i1: i0
    i2: i4
    conditioning: {}
    label: ubuntu-3-ens2<->Leaf-2-Ethernet1/3
lab:
  description: ''
  notes: ''
  title: Lab at Wed 04:33 AM
  version: 0.2.2
